{
  "Id": 21,
  "Name": "Source Engine Facts",
  "UserPrompt": "Show a bunch of source engine facts in the top left of the screen hud with an image of Dr. Kleiner (entities/npc_kleiner.png)\n",
  "ExecutionCode": "RunOnClient([=[\n-- Source Engine Facts HUD with Dr. Kleiner\nlocal facts = {\n    \u0022The Source Engine was first used in Counter-Strike: Source (2004)\u0022,\n    \u0022Hammer Editor was originally called Worldcraft\u0022,\n    \u0022Source uses BSP (Binary Space Partitioning) for map geometry\u0022,\n    \u0022The engine supports up to 4096 entities per map\u0022,\n    \u0022Phong shading was added in the Episode 1 update\u0022,\n    \u0022Source\u0027s physics engine is based on Havok\u0022,\n    \u0022The max brush limit in Source is 8192\u0022,\n    \u0022VALVe stands for \u0027Conditions Are Variable Logic Valves Everywhere\u0027... just kidding!\u0022,\n    \u0022The airboat in HL2 took over a year to get right\u0022,\n    \u0022Dog was originally going to be a flying robot\u0022,\n    \u0022The Gravity Gun was called the \u0027Manipulator\u0027 internally\u0022,\n    \u0022Alyx was almost cut from Half-Life 2\u0022,\n    \u0022Source maps compile using VBSP, VVIS, and VRAD\u0022,\n    \u0022The engine\u0027s facial animation system is called Faceposer\u0022,\n    \u0022HL2\u0027s train station was inspired by Budapest Keleti\u0022,\n    \u0022Ravenholm was originally much longer\u0022,\n    \u0022The Combine were once called \u0027The Caste\u0027\u0022,\n    \u0022Source supports HDR lighting since Episode 1\u0022,\n    \u0022The max lightmap scale is 16 units per luxel\u0022,\n    \u0022Dr. Breen was voiced by Robert Culp\u0022,\n}\n\nlocal currentFact = 1\nlocal factChangeTime = 0\nlocal factDuration = 6\n\n-- Create the HUD element\nlocal kleiner_facts = {}\n\nfunction kleiner_facts:GetSize()\n    local scale = ChaosHUD and ChaosHUD.GetScale() or (ScrH() / 480)\n    return 280 * scale, 100 * scale\nend\n\nfunction kleiner_facts:Draw(x, y, h)\n    local scale = ChaosHUD and ChaosHUD.GetScale() or (ScrH() / 480)\n    local w = 280 * scale\n    h = h or (100 * scale)\n    \n    -- Change fact periodically\n    if CurTime() \u003E factChangeTime then\n        currentFact = math.random(1, #facts)\n        factChangeTime = CurTime() \u002B factDuration\n    end\n    \n    -- Background\n    local bgColor = ChaosHUD and ChaosHUD.Colors.BgStandard or Color(0, 0, 0, 72)\n    local textColor = ChaosHUD and ChaosHUD.Colors.Yellow or Color(255, 220, 0, 255)\n    local cornerRadius = ChaosHUD and ChaosHUD.Styles.CornerRadius or 8\n    \n    draw.RoundedBox(cornerRadius, x, y, w, h, bgColor)\n    \n    -- Kleiner image\n    local imgSize = 64 * scale\n    local imgX = x \u002B (8 * scale)\n    local imgY = y \u002B (h/2) - (imgSize/2)\n    \n    local kleinerMat = Material(\u0022entities/npc_kleiner.png\u0022, \u0022smooth\u0022)\n    if kleinerMat and not kleinerMat:IsError() then\n        surface.SetDrawColor(255, 255, 255, 255)\n        surface.SetMaterial(kleinerMat)\n        surface.DrawTexturedRect(imgX, imgY, imgSize, imgSize)\n    else\n        -- Fallback box if image not found\n        draw.RoundedBox(4, imgX, imgY, imgSize, imgSize, Color(100, 100, 100, 200))\n        draw.SimpleText(\u0022?\u0022, \u0022DermaLarge\u0022, imgX \u002B imgSize/2, imgY \u002B imgSize/2, textColor, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)\n    end\n    \n    -- Title\n    draw.SimpleText(\u0022SOURCE ENGINE FACTS\u0022, \u0022ChaosHUD_Text\u0022, x \u002B (80 * scale), y \u002B (8 * scale), textColor, TEXT_ALIGN_LEFT, TEXT_ALIGN_TOP)\n    \n    -- Fact text (wrapped)\n    local textX = x \u002B (80 * scale)\n    local textY = y \u002B (22 * scale)\n    local textW = w - (90 * scale)\n    \n    local fact = facts[currentFact]\n    local wrapped = \u0022\u0022\n    local line = \u0022\u0022\n    \n    for word in fact:gmatch(\u0022%S\u002B\u0022) do\n        local testLine = line == \u0022\u0022 and word or (line .. \u0022 \u0022 .. word)\n        surface.SetFont(\u0022ChaosHUD_SmallText\u0022)\n        local tw = surface.GetTextSize(testLine)\n        if tw \u003E textW then\n            wrapped = wrapped .. line .. \u0022\\n\u0022\n            line = word\n        else\n            line = testLine\n        end\n    end\n    wrapped = wrapped .. line\n    \n    for i, ln in ipairs(string.Explode(\u0022\\n\u0022, wrapped)) do\n        draw.SimpleText(ln, \u0022ChaosHUD_SmallText\u0022, textX, textY \u002B ((i-1) * 10 * scale), color_white, TEXT_ALIGN_LEFT, TEXT_ALIGN_TOP)\n    end\n    \n    return w, h\nend\n\n-- Register with ChaosHUD if available\nif ChaosHUD and ChaosHUD.AddTopLeftElement then\n    ChaosHUD.AddTopLeftElement(\u0022KleinerFacts\u0022, kleiner_facts, 5)\nelse\n    -- Fallback standalone rendering\n    hook.Add(\u0022HUDPaint\u0022, \u0022AIChaos_KleinerFacts\u0022, function()\n        kleiner_facts:Draw(16, 16, 100)\n    end)\nend\n]=])",
  "UndoCode": "RunOnClient([=[\nif ChaosHUD and ChaosHUD.RemoveTopLeftElement then\n    ChaosHUD.RemoveTopLeftElement(\u0022KleinerFacts\u0022)\nend\nhook.Remove(\u0022HUDPaint\u0022, \u0022AIChaos_KleinerFacts\u0022)\n]=])",
  "Category": "Fun",
  "Description": null,
  "SavedAt": "2025-12-16T19:53:10.565468Z",
  "OriginalCommandId": 356,
  "IsBuiltIn": true,
  "Variations": []
}