{
  "Id": 15,
  "Name": "Sneaky Creeper",
  "UserPrompt": "make a creeper sneak up behind the player (don\u0027t download a model for this by guessing a workshop id it won\u0027t work). it should sneak up behind the player, hiss and start its fuse, then explode",
  "ExecutionCode": "local ply = Entity(1)\nif not IsValid(ply) then return end\n\nlocal spawnPos = ply:GetPos() - ply:GetForward() * 200 \u002B Vector(0, 0, 10)\n\nlocal creeper = ents.Create(\u0022prop_physics\u0022)\ncreeper:SetModel(\u0022models/props_junk/wood_crate001a.mdl\u0022)\ncreeper:SetPos(spawnPos)\ncreeper:SetAngles(Angle(0, (ply:GetPos() - spawnPos):Angle().y, 0))\ncreeper:Spawn()\ncreeper:SetColor(Color(0, 150, 0))\ncreeper:SetMaterial(\u0022models/debug/debugwhite\u0022)\ncreeper:GetPhysicsObject():EnableMotion(false)\n\n_G.sneakyCreeper = creeper\n\nlocal startTime = CurTime()\nlocal hasHissed = false\nlocal explodeTime = nil\n\ntimer.Create(\u0022CreeperSneak\u0022, 0.05, 0, function()\n    if not IsValid(creeper) or not IsValid(ply) then\n        timer.Remove(\u0022CreeperSneak\u0022)\n        return\n    end\n    \n    local dist = creeper:GetPos():Distance(ply:GetPos())\n    \n    if dist \u003E 100 and not hasHissed then\n        local dir = (ply:GetPos() - creeper:GetPos()):GetNormalized()\n        local newPos = creeper:GetPos() \u002B dir * 8\n        newPos.z = ply:GetPos().z \u002B 10\n        creeper:SetPos(newPos)\n        creeper:SetAngles(Angle(0, dir:Angle().y, 0))\n    elseif dist \u003C= 100 and not hasHissed then\n        hasHissed = true\n        explodeTime = CurTime() \u002B 1.5\n        \n        creeper:EmitSound(\u0022ambient/creatures/town_child_scream1.wav\u0022, 80, 150)\n        \n        timer.Create(\u0022CreeperFlash\u0022, 0.15, 10, function()\n            if IsValid(creeper) then\n                local flash = creeper:GetColor().r == 255\n                creeper:SetColor(flash and Color(0, 150, 0) or Color(255, 255, 255))\n            end\n        end)\n    end\n    \n    if hasHissed and CurTime() \u003E= explodeTime then\n        timer.Remove(\u0022CreeperSneak\u0022)\n        timer.Remove(\u0022CreeperFlash\u0022)\n        \n        local explodePos = creeper:GetPos()\n        \n        local explosion = ents.Create(\u0022env_explosion\u0022)\n        explosion:SetPos(explodePos)\n        explosion:SetKeyValue(\u0022iMagnitude\u0022, \u0022100\u0022)\n        explosion:Spawn()\n        explosion:Fire(\u0022Explode\u0022)\n        \n        creeper:Remove()\n        \n        RunOnClient([=[\n            surface.PlaySound(\u0022ambient/explosions/explode_4.wav\u0022)\n            \n            local flash = vgui.Create(\u0022DPanel\u0022)\n            flash:SetSize(ScrW(), ScrH())\n            flash:SetPos(0, 0)\n            flash.startTime = CurTime()\n            flash.Paint = function(s, w, h)\n                local alpha = math.max(0, 255 - (CurTime() - s.startTime) * 400)\n                surface.SetDrawColor(255, 200, 100, alpha)\n                surface.DrawRect(0, 0, w, h)\n                if alpha \u003C= 0 then s:Remove() end\n            end\n        ]=])\n        \n        _G.sneakyCreeper = nil\n    end\nend)",
  "UndoCode": "timer.Remove(\u0022CreeperSneak\u0022)\ntimer.Remove(\u0022CreeperFlash\u0022)\nif IsValid(_G.sneakyCreeper) then\n    _G.sneakyCreeper:Remove()\n    _G.sneakyCreeper = nil\nend",
  "Category": "Threatening",
  "Description": null,
  "SavedAt": "2025-12-16T04:32:06.0800299Z",
  "OriginalCommandId": 292,
  "IsBuiltIn": true,
  "Variations": []
}